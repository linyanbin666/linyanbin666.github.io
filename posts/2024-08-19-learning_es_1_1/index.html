<!doctype html><html lang=zh-CN><head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#"><meta charset=UTF-8><meta name=generator content="Hugo 0.133.0"><meta name=theme-color content="#fff"><meta name=color-scheme content="light dark"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no, date=no, address=no, email=no"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><title>书籍学习-一本书讲透Elasticsearch：原理、进阶和工程实践（一） | 原生菜鸟</title>
<link rel=stylesheet href=/css/meme.min.54f473a397d341ce90335ddfd512f3856c19f0a5f89b1c5c8c73909e15a11cdf.css><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js defer></script><script src=/js/meme.min.32a685b876c1998d527bb4856eb99ced36a759a7edf7abda6454a6973422edef.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;family=Comfortaa:wght@700&amp;display=swap" media=print onload='this.media="all"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&amp;family=Comfortaa:wght@700&amp;display=swap"></noscript><meta name=author content="Yanbin Lin"><meta name=description content="本文是个人学习书籍《一本书讲透Elasticsearch：原理、进阶和工程实践》过程……"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=mask-icon href=/icons/safari-pinned-tab.svg color=#2a6df4><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="原生菜鸟"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=mobile-web-app-capable content="yes"><meta name=application-name content="原生菜鸟"><meta name=msapplication-starturl content="../../"><meta name=msapplication-TileColor content="#fff"><meta name=msapplication-TileImage content="../../icons/mstile-150x150.png"><link rel=manifest href=/manifest.json><link rel=canonical href=https://ithorizon.top/posts/2024-08-19-learning_es_1_1/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2024-08-19T09:28:00+00:00","dateModified":"2024-08-19T09:37:51+00:00","url":"https://ithorizon.top/posts/2024-08-19-learning_es_1_1/","headline":"书籍学习-一本书讲透Elasticsearch：原理、进阶和工程实践（一）","description":"本文是个人学习书籍《一本书讲透Elasticsearch：原理、进阶和工程实践》过程……","inLanguage":"zh-CN","articleSection":"posts","wordCount":5378,"image":"https://ithorizon.top/icons/apple-touch-icon.png","author":{"@type":"Person","description":"To Be Better","email":"1468387317@qq.com","image":"https://ithorizon.top/icons/apple-touch-icon.png","url":"https://ithorizon.top/","name":"Yanbin Lin"},"license":"在保留本文作者及本文链接的前提下，非商业用途随意转载分享","publisher":{"@type":"Organization","name":"原生菜鸟","logo":{"@type":"ImageObject","url":"https://ithorizon.top/icons/apple-touch-icon.png"},"url":"https://ithorizon.top/"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://ithorizon.top/"}}</script><meta name=twitter:card content="summary"><meta property="og:title" content="书籍学习-一本书讲透Elasticsearch：原理、进阶和工程实践（一）"><meta property="og:description" content="本文是个人学习书籍《一本书讲透Elasticsearch：原理、进阶和工程实践》过程……"><meta property="og:url" content="https://ithorizon.top/posts/2024-08-19-learning_es_1_1/"><meta property="og:site_name" content="原生菜鸟"><meta property="og:locale" content="zh"><meta property="og:image" content="https://ithorizon.top/icons/apple-touch-icon.png"><meta property="og:type" content="article"><meta property="article:published_time" content="2024-08-19T09:28:00+00:00"><meta property="article:modified_time" content="2024-08-19T09:37:51+00:00"><meta property="article:section" content="posts"><link rel=preconnect href=https://www.google-analytics.com crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1KGLPKY6FP"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1KGLPKY6FP")</script></head><body><div class=container><header class=header><div class=header-wrapper><div class="header-inner single"><div class=site-brand><a href=/ class=brand>原生菜鸟</a></div><nav class=nav><ul class=menu id=menu><li class=menu-item><a href=/posts/><svg viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7.0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6.0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6.0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3.0 64v48c0 8.8 7.2 16 16 16h480c8.8.0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class=menu-item-name>技术</span></a></li><li class=menu-item><a href=/categories/><svg t="1618732736564" class="icon categories" viewBox="0 0 1024 1024" p-id="2007" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style/></defs><path d="M315.0848 551.3728H157.5424C70.8864 551.3728.0 622.2848.0 708.9152v157.5424C0 953.1136 70.912 1024 157.5424 1024h157.5424c86.6304.0 157.5424-70.912 157.5424-157.5424V708.9152c0-86.6304-70.912-157.5424-157.5424-157.5424zm78.7712 315.0848a79.0016 79.0016.0 01-78.7712 78.7712H157.5424a79.0016 79.0016.0 01-78.7712-78.7712V708.9152a79.0016 79.0016.0 0178.7712-78.7712h157.5424a79.0016 79.0016.0 0178.7712 78.7712v157.5424zM866.4576.0H708.9152c-86.6304.0-157.5424 70.912-157.5424 157.5424v157.5424c0 86.6304 70.912 157.5424 157.5424 157.5424h157.5424c86.656.0 157.5424-70.912 157.5424-157.5424V157.5424C1024 70.8864 953.088.0 866.4576.0zm78.7712 315.0848a79.0016 79.0016.0 01-78.7712 78.7712H708.9152a79.0016 79.0016.0 01-78.7712-78.7712V157.5424a79.0016 79.0016.0 0178.7712-78.7712h157.5424a79.0016 79.0016.0 0178.7712 78.7712v157.5424zm-78.7712 236.288H708.9152c-86.6304.0-157.5424 70.912-157.5424 157.5424v157.5424c0 86.656 70.912 157.5424 157.5424 157.5424h157.5424C953.1136 1024 1024 953.088 1024 866.4576V708.9152c0-86.6304-70.912-157.5424-157.5424-157.5424zm78.7712 315.0848a79.0016 79.0016.0 01-78.7712 78.7712H708.9152a79.0016 79.0016.0 01-78.7712-78.7712V708.9152a79.0016 79.0016.0 0178.7712-78.7712h157.5424a79.0016 79.0016.0 0178.7712 78.7712v157.5424zM315.0848.0H157.5424C70.8864.0.0 70.912.0 157.5424v157.5424c0 86.6304 70.912 157.5424 157.5424 157.5424h157.5424c86.6304.0 157.5424-70.912 157.5424-157.5424V157.5424C472.6272 70.8864 401.7152.0 315.0848.0zm78.7712 315.0848a79.0016 79.0016.0 01-78.7712 78.7712H157.5424a79.0016 79.0016.0 01-78.7712-78.7712V157.5424a79.0016 79.0016.0 0178.7712-78.7712h157.5424a79.0016 79.0016.0 0178.7712 78.7712v157.5424z" fill="#707070" p-id="2008"/></svg><span class=menu-item-name>分类</span></a></li><li class=menu-item><a href=/tags/><svg viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941 286.059 14.059A48 48 0 00252.118.0H48C21.49.0.0 21.49.0 48v204.118a48 48 0 0014.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882.0l204.118-204.118c18.745-18.745 18.745-49.137.0-67.882zM112 160c-26.51.0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882.0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397.0h48.721a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882z"/></svg><span class=menu-item-name>标签</span></a></li><li class=menu-item><a href=/about/><svg viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6.0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7.0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4.0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9s28-2.7 40.9-6.9c2.3-.7 4.7-1.1 7.1-1.1 42.9.0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class=menu-item-name>关于</span></a></li><li class=menu-item><a id=theme-switcher href=#><svg viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5 242 7a18 18 0 0128 0l48.8 97.5L422.2 70A18 18 0 01442 89.8l-34.5 103.4L505 242a18 18 0 010 28l-97.5 48.8L442 422.2A18 18 0 01422.2 442l-103.4-34.5L270 505a18 18 0 01-28 0l-48.8-97.5L89.8 442A18 18 0 0170 422.2l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8L70 89.8A18 18 0 0189.8 70zM256 128a128 128 0 10.01.0M256 160a96 96 0 10.01.0"/></svg><svg viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412A256 256 0 10181 5a11.5 11.5.0 00-5 20A201.5 201.5.0 0142 399a11.5 11.5.0 00-15 13"/></svg></a></li></ul></nav></div></div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle></label>
<label for=nav-toggle class=nav-curtain></label></header><main class="main single" id=main><div class=main-inner><article class="content post h-entry" data-align=justify data-type=posts data-toc-num=true><h1 class="post-title p-name">书籍学习-一本书讲透Elasticsearch：原理、进阶和工程实践（一）</h1><div class=post-meta><time datetime=2024-08-19T09:28:00+00:00 class="post-meta-item published dt-published"><svg viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6.0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6.0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6.0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6.0 12 5.4 12 12v52h48c26.5.0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3.0 6-2.7 6-6z"/></svg>&nbsp;2024.8.19</time>
<time datetime=2024-08-19T09:37:51+00:00 class="post-meta-item modified dt-updated"><svg viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M4e2 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627.0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627.0-12 5.373-12 12v52H48C21.49 64 0 85.49.0 112v352c0 26.51 21.49 48 48 48h352c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 4e2H54a6 6 0 01-6-6V160h352v298a6 6 0 01-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;2024.8.19</time>
<span class="post-meta-item category"><svg viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href=/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/ class="category-link p-category">学习笔记</a></span>
<span class="post-meta-item wordcount"><svg viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3.0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9.0l60.1 60.1c18.8 18.7 18.8 49.1.0 67.9zM284.2 99.8 21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3.0-17l-111-111c-4.8-4.7-12.4-4.7-17.1.0zM124.1 339.9c-5.5-5.5-5.5-14.3.0-19.8l154-154c5.5-5.5 14.3-5.5 19.8.0s5.5 14.3.0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8.0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;5378</span>
<span class="post-meta-item reading-time"><svg viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5.0-2e2-89.5-2e2-2e2S145.5 56 256 56s2e2 89.5 2e2 2e2-89.5 2e2-2e2 2e2zm61.8-104.4-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6.0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;11&nbsp;分钟</span></div><div class="post-body e-content"><blockquote><p>本文是个人学习书籍《一本书讲透Elasticsearch：原理、进阶和工程实践》过程中所记录的一些笔记，内容来源于书籍</p></blockquote><h2 id=elastic-stack全景><a href=#elastic-stack全景 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Elastic Stack全景</h2><ul><li><p>ELK Stack：Elasticsearch、Logstash、Kibana</p></li><li><p>Elastic Stack：Elasticsearch（存储、查询）、Logstash + Beats（采集、清洗）、Kibana（可视化）</p></li><li><p>Elasticsearch特点</p><ul><li><p>RESTful API</p></li><li><p>横向扩展节点</p></li><li><p>面向文档</p></li><li><p>无模式，无须定义好字段类型、长度等</p></li><li><p>近实时搜索</p></li><li><p>响应快</p></li><li><p>易扩展</p></li><li><p>多租户</p></li><li><p>多语言</p></li></ul></li><li><p>Logstash：提供免费且开放的服务器端数据处理管道(pipeline)，能够从多个不同的数据源采集数据、转换数据，然后将数据发送到诸如Elasticsearch等“存储库”中</p></li><li><p>Kibana：集成了丰富的可视化工具、界面交互开发工具和管理工具，可以辅助技术人员进行开发、调试和运维工作，并可以自定义各种维度的数据报表</p></li><li><p>Beats：集合了多种单一用途的数据采集器，这些数据采集器包含轻量型日志采集器Filebeat、轻量型指标采集器Metricbeat、轻量型网络数据采集器Packetbeat等</p></li><li><p>Elastic Stack应用场景</p><ul><li><p>全文检索</p></li><li><p>日志分析</p></li><li><p>商业智能</p></li></ul></li></ul><h2 id=elasticsearch基础知识><a href=#elasticsearch基础知识 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Elasticsearch基础知识</h2><ul><li><p>搜索引擎的目标</p><ul><li><p>全面性</p></li><li><p>速度</p></li><li><p>准确性</p></li></ul></li><li><p>搜索引擎的核心要求</p><ul><li><p>识别用户真正的需求</p></li><li><p>匹配用户需求</p></li><li><p>找到可信数据</p></li></ul></li><li><p>检索质量的评价指标</p><ul><li><p>召回率：在一次返回的搜索结果中与搜索关键词相关的文档占所有相关文档的比例</p></li><li><p>精准率：本次搜索结果中相关文档所占的比例</p></li></ul></li><li><p>倒排索引：在一个文档集合中，每个文档都可视为一个词语的集合，倒排索引则是将词语映射到包含这个词语的文档的数据结构</p></li><li><p>全文检索：全文检索的前提是待检索的数据已经索引化，当用户查询时能根据建立的倒排索引进行查找</p></li><li><p>Elasticsearch的核心概念</p><ul><li><p>集群：一组Elasticsearch节点的集合</p></li><li><p>节点：一个Elasticsearch实例，更确切地说，它是一个Elasticsearch进程</p></li><li><p>索引：用于存储和管理相关数据的逻辑容器</p></li><li><p>分片：包含索引数据的一个子集，并且其本身具有完整的功能和独立性，可以将分片近似看作“独立索引“</p></li><li><p>副本：为了保证集群的容错性和高可用性、提高查询的吞吐率，Elasticsearch提供了复制数据的特性。分片可以被复制，被复制的分片称为“主分片“，主分片的复制版本称为“副本“</p></li><li><p>文档：存储在Elasticsearch索引中的JSON对象</p></li><li><p>字段：Elasticsearch中最小的单个数据单元，类似于关系型数据库表中的字段</p></li><li><p>映射：映射类似于关系型数据库中的Schema，可以近似地理解为“表结构”</p></li><li><p>分词：构建倒排索引的重要一环</p></li></ul></li></ul><h2 id=elasticsearch集群部署><a href=#elasticsearch集群部署 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Elasticsearch集群部署</h2><ul><li><p>Elasticsearch集群堆内存设置建议：将堆大小配置为服务器可用内存的50%，上限为32GB，且预留足够的内存给操作系统以提升缓存效率</p></li><li><p>节点角色（node.roles配置项）</p><ul><li><p>主节点：关键作用主要在全局管理上，如管理索引的创建和删除、监控集群节点、确认分片分配、存储重要的元数据（索引的元数据、集群的元数据）</p><ul><li><p>专用候选主节点（master）</p></li><li><p>仅投票主节点：仅用于投票，不会被选为主节点（master, voting_only）</p></li></ul></li><li><p>数据节点：保存数据、执行数据处理操作（data）</p><ul><li><p>内容数据节点：存储、搜索、索引数据（data_content）</p></li><li><p>热数据节点：保存最近、最常访问的热数据（data_hot）</p></li><li><p>温数据节点：保存访问频次低且很少更新的时序数据（data_warm）</p></li><li><p>冷数据节点：保存不经常访问且通常不更新的时序数据（data_cold）</p></li><li><p>冷冻数据节点：保存很少访问且从不更新的时序数据（data_frozen）</p></li><li><p>注意：data_hot、data_warm和data_cold需要和data_content一起配置，数据的实际存储需要靠data_content角色</p></li></ul></li><li><p>ingest节点：通常执行由预处理管道组成的预处理任务（ingest）</p></li><li><p>仅协调节点：负责路由分发请求、聚合结果（配置项为空）</p></li><li><p>远程节点：用于跨集群检索或跨集群复制（remote_cluster_client）</p></li><li><p>机器学习节点（ml, remote_cluster_client）</p></li><li><p>转换节点（transform）</p></li></ul></li><li><p>Elasticsearch集群核心配置</p><ul><li><p>network.host，不修改时默认为开发模式，节点配置错误时只会在日志中写入警告信息，节点依然能启动；修改后会升级为生产模式，一旦配置错误，则节点无法正常启动</p></li><li><p>Linux前置配置</p><ul><li><p>修改文件描述符数量限制（调高）</p></li><li><p>修改最大映射数量（调高）</p></li></ul></li><li><p>elasticsearch.yml配置文件</p></li><li><p>jvm.option配置文件</p></li></ul></li></ul><h2 id=elasticsearch索引><a href=#elasticsearch索引 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Elasticsearch索引</h2><ul><li><p>定义</p><ul><li><p>名称</p></li><li><p>settings</p><ul><li><p>静态设置</p></li><li><p>动态设置</p></li></ul></li><li><p>mappings</p><ul><li>可以将索引映射理解成MySQL中的表结构Schema</li></ul></li><li><p>aliases</p><ul><li><p>一个索引可以创建多个别名</p></li><li><p>一个别名也可以指向多个索引</p></li></ul></li></ul></li><li><p>操作</p><ul><li><p>新增/创建索引</p><ul><li><p>方式一：详细定义索引设置、映射、别名</p></li><li><p>方式二：只定义索引名，而settings、mappings取默认值</p></li></ul></li><li><p>删除索引</p><ul><li><p>方式一：删除索引（推荐）</p></li><li><p>方式二：结合delete_by_query和match_all实现清空，还能保留索引</p></li></ul></li><li><p>修改索引</p></li><li><p>查询索引</p></li></ul></li><li><p>索引别名</p></li><li><p>索引模板</p><ul><li><p>定义</p><ul><li><p>普通模板（_index_template）</p></li><li><p>组件模板（_component_template）</p></li></ul></li><li><p>映射下的动态模板（dynamic_templates）</p></li></ul></li></ul><h2 id=elasticsearch映射><a href=#elasticsearch映射 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Elasticsearch映射</h2><ul><li><p>映射的定义</p><ul><li><p>元字段</p><ul><li><p>标识元字段</p><ul><li><p>_index：表示文档所属的索引</p></li><li><p>_id：表示文档的id</p></li></ul></li><li><p>文档源字段</p><ul><li><p>_source：表示代表文档正文的原始JSON对象</p></li><li><p>_size：表示source字段的大小（以字节为单位）</p></li></ul></li><li><p>索引元字段</p><ul><li><p>_field_names：表示给定文档中包含非空值的所有字段</p></li><li><p>_ignored：表示由于设置ignore_malformed而在索引时被忽略的字段</p></li></ul></li><li><p>路由元字段</p><ul><li>_routing：用于将给定文档路由到指定的分片</li></ul></li><li><p>其他元字段</p><ul><li><p>_meta：表示应用程序特定的元数据</p></li><li><p>_tier：指定文档所属索引的数据层级别</p></li></ul></li></ul></li><li><p>数据类型</p><ul><li><p>基本类型</p><ul><li><p>binary：编码为Base64字符串的二进制类型</p></li><li><p>boolean：仅支持true和false的布尔类型</p></li><li><p>keyword：支持精准匹配的keyword类型、const_keyword类型和wildcard类型</p></li><li><p>number：数值类型，如integer、long、float、double等</p></li><li><p>date：日期类型，包括date和date_nanos</p></li><li><p>alias：别名类型，字段级别的别名</p></li><li><p>text：字段级别的别名</p></li></ul></li><li><p>复杂数据类型</p><ul><li><p>数组类型：Array</p></li><li><p>JSON对象类型：Object</p></li><li><p>嵌套数据类型：Nested</p></li><li><p>父子关联类型：Join</p></li><li><p>Flattened类型：将原来一个复杂的Object或者Nested嵌套多字段类型统一映射为扁平的单字段类型</p></li></ul></li><li><p>专用数据类型</p><ul><li><p>坐标数据类型：用于保存地理位置详细信息</p></li><li><p>IP类型：表示IPV4或IPV6地址</p></li><li><p>completion类型：是Elasticsearch中的一种专用字段类型，旨在实现高效的自动补全功能</p></li></ul></li><li><p>多字段类型：为相同字段生成多种数据类型</p></li></ul></li><li><p>映射类型</p><ul><li><p>动态映射：自动检测字段类型后添加新字段（boolean类型、float类型、long类型、Object类型、Array类型、date类型、字符串类型支持动态检测，除此之外的类型是不支持动态检测匹配的，会适配为text类型）</p><ul><li><p>弊端</p><ul><li><p>字段匹配不准确</p></li><li><p>占据多余的存储空间</p></li><li><p>映射可能错误泛滥</p></li></ul></li></ul></li><li><p>静态映射：在数据建模前，需要明确文档中各个字段的类型</p><ul><li><p>忽略动态添加字段（mappings内指定dynamic为false）</p></li><li><p>严格禁止动态添加字段（mappings内指定dynamic为“strict”）</p></li></ul></li></ul></li><li><p>映射创建后还可以更新吗</p><ul><li><p>已经定义的字段在大多数情况下不能更新，除非通过reindex操作来更新映射，但有3种情况例外：</p><ul><li><p>Object对象可以添加新的属性</p></li><li><p>在已经存在的字段里面可以添加fields，以构成一个字段多种类型</p></li><li><p>ignore_above是可以更新的</p></li></ul></li></ul></li></ul></li><li><p>Nested类型及应用</p><ul><li><p>没有特殊的字段类型说明，那么默认写入的嵌套数据映射为Object类型，其嵌套的字段部分被扁平化为一个简单的字段名称和值列表</p></li><li><p>Nested类型是Object数据类型的升级版本，它允许对象以彼此独立的方式进行索引</p></li></ul></li><li><p>Join类型及应用</p><ul><li><p>Join类型的重要特点</p><ul><li><p>对于每个索引，仅允许定义一个与Join类型关联的映射</p></li><li><p>父文档和子文档必须在同一个分片上写入索引</p></li><li><p>一个文档可以有多个子文档，但一个子文档只能有一个父文档</p></li><li><p>可以为已经存在的Join类型添加新的关系</p></li><li><p>当一个文档已经成为父文档后，就可以为该文档添加子文档</p></li></ul></li></ul></li><li><p>Flattened类型及应用</p><ul><li><p>Flattened字段就是用来解决字段膨胀问题的</p></li><li><p>使用Flattened类型，Elasticsearch未对字段进行分词等处理，因此它只会返回匹配字母大小写且完全一致的结果</p></li><li><p>Flattened类型的不足</p><ul><li><p>Flattened不支持的查询类型</p><ul><li><p>无法执行涉及数字计算的查询</p></li><li><p>无法支持高亮查询</p></li><li><p>尽管支持诸如term聚合之类的聚合，但不支持处理诸如histograms或date_histograms之类的数值数据的聚合</p></li></ul></li></ul></li></ul></li><li><p>多表关联设计</p><ul><li><p>Elasticsearch多表关联方案</p><ul><li><p>Nested嵌套类型</p><ul><li><p>适用于一对少量、子文档偶尔更新、查询频繁的场景</p></li><li><p>优点</p><ul><li><p>可以将父子关系的两部分数据关联起来</p></li><li><p>可以基于Nested类型做任何查询</p></li></ul></li><li><p>缺点</p><ul><li><p>查询相对较慢</p></li><li><p>更新子文档时需要更新整篇文档</p></li></ul></li></ul></li><li><p>Join父子文档类型</p><ul><li><p>适用于子文档数据量明显多于父文档的数据量的场景</p></li><li><p>优点</p><ul><li>父子文档可独立更新</li></ul></li><li><p>缺点</p><ul><li>维护Join关系需要占据部分内存，查询较Nested类型更耗资源</li></ul></li></ul></li><li><p>宽表冗余存储</p><ul><li><p>对每个文档保持一定数量的冗余数据以避免访问时进行多表关联</p></li><li><p>优点</p><ul><li>速度快，本质是以空间换时间</li></ul></li><li><p>缺点</p><ul><li><p>索引更新或删除数据时，应用程序不得不处理宽表的冗余数据</p></li><li><p>某些搜索和聚合操作的结果可能不准确</p></li></ul></li></ul></li><li><p>业务端关联</p><ul><li>在应用接口层面处理关联关系，适用于数据量少的多表关联业务场景</li></ul></li></ul></li></ul></li><li><p>内部数据结构</p><ul><li><p>倒排索引</p><ul><li><p>从单词到文档的映射关系的最佳实现形式</p></li><li><p>特点</p><ul><li><p>在索引时创建</p></li><li><p>序列化到磁盘</p></li><li><p>全文搜索速度非常快</p></li><li><p>不适合做排序</p></li><li><p>默认开启</p></li></ul></li><li><p>适用场景</p><ul><li><p>文本搜索引擎</p></li><li><p>文档检索系统</p></li><li><p>企业内部搜索</p></li><li><p>社交媒体分析</p></li><li><p>新闻和论文检索</p></li><li><p>数据挖掘</p></li></ul></li></ul></li><li><p>正排索引</p><ul><li><p>在Elasticsearch中，正排索引(doc_values)就是一种列式存储结构，默认情况下每个字段的doc_values都是激活的（除了text类型）</p></li><li><p>特点</p><ul><li><p>在索引时创建</p></li><li><p>序列化到磁盘</p></li><li><p>适合排序、聚合操作</p></li><li><p>将单个字段的所有值一起存储在单个数据列中</p></li><li><p>默认情况下，除text之外的所有字段类型均启用正排索引</p></li></ul></li><li><p>适用场景</p><ul><li><p>对一个字段进行排序、聚合</p></li><li><p>某些过滤场景，比如地理位置过滤</p></li><li><p>某些与字段相关的脚本计算</p></li></ul></li></ul></li><li><p>fielddata</p><ul><li><p>当text字段被用于聚合、排序或脚本操作时，fielddata会按需构建相应的数据结构。通过从磁盘读取每个字段的完整倒排索引，反转词项与文档之间的关系，并将结果存储在JVM堆的内存中构建的</p></li><li><p>特点</p><ul><li><p>仅适用于text字段类型</p></li><li><p>在查询时创建</p></li><li><p>是基于内存的数据结构</p></li><li><p>没有序列化到磁盘</p></li><li><p>默认情况下被禁用</p></li></ul></li><li><p>适用场景</p><ul><li><p>全文统计词频</p></li><li><p>全文生成词云</p></li><li><p>聚合、排序、脚本计算</p></li></ul></li></ul></li><li><p>_source字段</p><ul><li>_source字段包含索引时传递的原始JSON文档主体</li></ul></li><li><p>store字段</p><ul><li>默认情况下，对字段值进行索引以使其可搜索（如倒排索引），但不存储它们。字段值是_source字段的一部分，默认情况下已存储。但对于某些特殊场景，比如你只想检索单个字段或几个字段的值，而不是整个_source的值，这时store字段就派上用场了</li></ul></li></ul></li><li><p>null_value</p><ul><li><p>使用null_value参数可以用指定的值替换显式的空值，以便对其进行索引和搜索</p></li><li><p>text类型不支持null_value，如果需要，可以使用multi_fields，借助keyword和text组合类型达到业务需求</p></li></ul></li></ul><h2 id=elasticsearch分词><a href=#elasticsearch分词 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Elasticsearch分词</h2><ul><li><p>分词发生的阶段</p><ul><li><p>写入阶段</p></li><li><p>执行检索阶段</p></li></ul></li><li><p>分词器的组成</p><ul><li><p>字符过滤（character filter，0个或多个）</p></li><li><p>文本切分为分词（tokenizer，1个）</p></li><li><p>分词后再过滤（token filter，0个或多个）</p></li></ul></li><li><p>分词器的分类</p><ul><li><p>支持不同语言的分词器</p></li><li><p>默认分词器（standard分词器）：将词汇单元转换成小写，并去除停用词和标点符号</p></li><li><p>其他典型的分词器（如IK分词等）</p></li></ul></li><li><p>分词选型注意事项</p><ul><li><p>若数据量非常少且不要求子串高亮，则可以考虑keyword</p></li><li><p>若数据量大且要求子串高亮，则推荐使用Ngram分词，结合match或者match_phrase检索实现</p></li><li><p>若数据量大，则不建议使用wildcard前缀匹配</p></li></ul></li></ul><h2 id=elasticsearch预处理><a href=#elasticsearch预处理 class=anchor-link><svg viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96.0-59.27-59.26-59.27-155.7.0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757.0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037.0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482.0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96.0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454.0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037.0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639.0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Elasticsearch预处理</h2><ul><li><p>Elasticsearch数据预处理是指在从数据源写入Elasticsearch的中间环节对数据进行的处理操作</p></li><li><p>预处理步骤</p><ul><li><p>定义预处理管道，通过管道实现数据预处理（_ingest/pipeline/xxx）</p></li><li><p>写入数据关联预处理管道</p></li><li><p>写入数据</p></li></ul></li><li><p>enrich预处理</p><ul><li><p>能在不同索引间通过相同的关联字段，从一个索引向另一个索引扩充字段信息</p></li><li><p>组成部分</p><ul><li><p>enrich policy（_enrich/policy/xxx）</p></li><li><p>source index（源索引）：用于丰富新写入文档的索引</p></li><li><p>enrich index（丰富索引）：执行enrich policy生成的索引</p><ul><li><p>Elasticsearch内部管理的系统级索引</p></li><li><p>用途很单一，仅用于enrich processor</p></li><li><p>以.enrich-*开头</p></li><li><p>只读，不支持人为修改</p></li></ul></li></ul></li></ul></li></ul></div></article><div class=related-posts><h2 class=related-title>相关文章：<svg viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6.0-12-5.4-12-12v-92h-92c-6.6.0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6.0 12 5.4 12 12v92h92c6.6.0 12 5.4 12 12v56z"/></svg></h2><ul class=related-list><li class=related-item><a href=/posts/2024-08-19-learning_es_1_3/ class=related-link>书籍学习-一本书讲透Elasticsearch：原理、进阶和工程实践（三）</a></li><li class=related-item><a href=/posts/2024-08-19-learning_es_1_2/ class=related-link>书籍学习-一本书讲透Elasticsearch：原理、进阶和工程实践（二）</a></li><li class=related-item><a href=/posts/2022-11-01-learning_mysql_45_3/ class=related-link>专栏学习-MySQL实战45讲（三）</a></li><li class=related-item><a href=/posts/2022-11-01-learning_mysql_45/ class=related-link>专栏学习-MySQL实战45讲（二）</a></li><li class=related-item><a href=/posts/2022-10-19-learning_jvm_2/ class=related-link>书籍学习-深入理解Java虚拟机（二）</a></li></ul></div><div class=post-tags><a href=/tags/elasticsearch/ rel=tag class=post-tags-link><svg viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>ElasticSearch</a>
<a href=/tags/es/ rel=tag class=post-tags-link><svg viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49.0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137.0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882.0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51.0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>ES</a></div><ul class=post-nav><li class=post-nav-prev><a href=/posts/2024-08-19-learning_es_1_2/ rel=prev>&lt; 书籍学习-一本书讲透Elasticsearch：原理、进阶和工程实践（二）</a></li><li class=post-nav-next><a href=/posts/model_platform/ rel=next>推荐工程-模型管理平台 ></a></li></ul><div id=utterances></div></div></main><div id=back-to-top class=back-to-top><a href=#><svg viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6.0-33.9L207 39c9.4-9.4 24.6-9.4 33.9.0l194.3 194.3c9.4 9.4 9.4 24.6.0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3.0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a></div><footer id=footer class=footer><div class=footer-inner><div class=site-info>©&nbsp;2021–2024&nbsp;<svg viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3.0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;Yanbin Lin</div><div class=powered-by>Powered by <a href=https://github.com/gohugoio/hugo target=_blank rel=noopener>Hugo</a> | Theme is <a href=https://github.com/reuixiy/hugo-theme-meme target=_blank rel=noopener>MemE</a></div><div class=site-copyright>在保留本文作者及本文链接的前提下，非商业用途随意转载分享</div><ul class=socials><li class=socials-item><a href=/rss.xml target=_blank rel="external noopener" title=RSS><svg viewBox="0 0 24 24" class="icon social-icon"><path d="M19.199 24C19.199 13.467 10.533 4.8.0 4.8V0c13.165.0 24 10.835 24 24h-4.801zM3.291 17.415c1.814.0 3.293 1.479 3.293 3.295.0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526.0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727.0 15.909 7.184 15.909 15.91z"/></svg></a></li><li class=socials-item><a href=1468387317@qq.com target=_blank rel="external noopener" title=Email><svg viewBox="0 0 512 512" class="icon social-icon"><path d="M464 64H48C21.49 64 0 85.49.0 112v288c0 26.51 21.49 48 48 48h416c26.51.0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 4e2V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V4e2H48z"/></svg></a></li><li class=socials-item><a href=https://github.com/linyanbin666 target=_blank rel="external noopener" title=GitHub><svg viewBox="0 0 24 24" class="icon social-icon"><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li></ul></div></footer></div><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")})</script><script>function loadComments(){(function(){const t=document.getElementById("utterances");if(!t)return;const e=document.createElement("script");e.src="https://utteranc.es/client.js",e.async=!0,e.crossOrigin="anonymous",e.setAttribute("repo","linyanbin666/linyanbin666.github.io"),e.setAttribute("issue-term","title");const n=getCurrentTheme()==="dark";n?e.setAttribute("theme","photon-dark"):e.setAttribute("theme","github-light"),t.appendChild(e)})()}</script><script src=https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js></script><script>let imgNodes=document.querySelectorAll("div.post-body img");imgNodes=Array.from(imgNodes).filter(e=>e.parentNode.tagName!=="A"),mediumZoom(imgNodes,{background:"hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)"})</script><script src=https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js type=module defer></script></body></html>